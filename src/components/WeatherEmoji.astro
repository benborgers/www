<img class="inline-block w-6 md:w-9 h-auto transform -translate-y-1 mx-0.5" id="weather-emoji" />

<script>
    const emojis = {
        '‚õàÔ∏è': ['thunderstorm'],
        'üå§': ['mostly sunny', 'mostly clear'],
        '‚õÖ': ['partly sunny', 'partly cloudy'],
        '‚òÅÔ∏è': ['cloud'],
        'üåßÔ∏è': ['rain'],
        'üå®Ô∏è': [],
        '‚òÄÔ∏è': ['sun', 'clear'],
        '‚ùÑÔ∏è': ['snow'],
        'üå©Ô∏è': [],
        'üå´': ['fog']
    }

    fetch('https://api.weather.gov/gridpoints/BOX/64,79/forecast')
        .then(res => res.json())
        .then(json => {
            const phrase = json.properties.periods[0].shortForecast.toLowerCase()
                                .replace(/then .*/, '') // Removes forecast for later (e.g. "mostly sunny then scattered showers and thunderstorms").
                                .trim()

            let selectedEmoji
            for(const emoji in emojis) {
                if(selectedEmoji) break

                const matchWords = emojis[emoji]
                matchWords.forEach(word => {
                    if(phrase.includes(word)) {
                        selectedEmoji = emoji
                    }
                })
            }

            if(! selectedEmoji) {
                selectedEmoji = 'üèô'
            }

            const img = document.querySelector('#weather-emoji')
            img.src = `https://emojicdn.elk.sh/${selectedEmoji}`
            img.title = `Currently: ${phrase}`
            img.alt = selectedEmoji
        })
</script>
