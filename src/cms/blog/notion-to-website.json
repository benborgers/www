{
  "published": true,
  "date": "2020-04-18T00:00:00.000Z",
  "title": "How to turn a Notion doc into a website",
  "slug": "notion-to-website",
  "description": "Notion is a really great note-taking app, and a lot of people have been wanting to turn their Notion documents into a nice looking website. I wrote a reverse-engineered API that allows you to read a Notion doc with code. ",
  "body": "I wrote my own reverse-engineered API for Notion, called Potion. The code is open source on [GitHub](https://github.com/benborgers/potion). \n\nToday, we're going to use that API to turn a Notion document into a website. \n\nThere's two ways of doing it: using a **static website** (no server), or using a **Node.js server**. We'll also discuss the pros and cons of each. \n\n## Getting the ID of your Notion doc\n\nFor both of these methods, you'll need the ID of your Notion doc. \n\nFirst, make the Notion doc public using the **Share** button in the top right corner: \n\n![](/assets/notion-public-access.png)\n\nThen, click the **Copy page link** button and paste it somewhere. The long random string of characters in that link is the document ID: \n\n![](/assets/notion-doc-id.png)\n\nWe'll use this ID in our code later. \n\n## Method 1: Static website\n\nThe benefits of this approach are that you can host the website very cheaply (for example, on [Netlify](https://netlify.com)) since it's just static files. However, the webpage is empty before the javascript executes, and crawlers (like Google) need to run the javascript in order to \"see\" the contents. \n\nLet's set up the skeleton of the web page: \n\n```jsx\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>Notion Doc</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <link rel=\"stylesheet\" href=\"/style.css\" />\n    <script src=\"/script.js\" defer></script>\n  </head>\n  <body>\n    <main></main>\n  </body>\n</html>\n```\n\nThis empty HTML page links a javascript file (at `/script.js`) and a CSS file (`/style.css`). \n\nI also added an empty `<main>` element in the body, which is where we'll load the Notion doc into. \n\nThen, I wrote some javascript in `script.js` that makes a request to the Potion API and fills in the `<main>` element with the result. It uses the Notion document ID you copied earlier. \n\n```jsx\nconst notionDocId = \"0cb628857f3c4c77bf7f9a879a6ec21d\"\n\nfetch(\"https://potion-api.now.sh/html?id=\" + notionDocId)\n  .then(res => res.text())\n  .then(text => {\n    document.querySelector(\"main\").innerHTML = text\n  })\n```\n\nThat's it! Now you have a website powered by your Notion doc. Here's the full code if you'd like to check it out: [Live demo](https://notion-to-website-static.glitch.me) and [source code](https://glitch.com/edit/#!/notion-to-website-static).\n\n## Method 2: Node.js server\n\nThe benefits of this approach are that the HTML sent by the server fully includes the Notion document's content, so it's easy for web crawlers (like Google) to read and understand. It doesn't require any client-side javascript to run. However, you need to run a full Node.js server to host it, so this solution can't be hosted on a static file host. \n\nI started by installing `express`, a framework for Node.js servers, and `node-fetch`, a package that replicates the `fetch` API in Node.js. \n\n```jsx\nconst express = require(\"express\")\nconst app = express()\n\nconst fetch = require(\"node-fetch\")\n\napp.listen(process.env.PORT)\n```\n\nThen, I added this Express route. It uses the Notion doc ID you copied earlier, makes a request to the Potion API, and then inserts the result of the API request in an HTML document on the server. \n\n```jsx\napp.get(\"/\", (req, res) => {\n  const notionDocId = \"0cb628857f3c4c77bf7f9a879a6ec21d\"\n\n  fetch(\"https://potion-api.now.sh/html?id=\" + notionDocId)\n    .then(res => res.text())\n    .then(text => {\n      res.send(`\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>Notion Doc</title>\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n            <style>\n              body {\n                font-family: system-ui, sans-serif;\n              }\n\n              img {\n                max-width: 100%;\n                max-height: 70vh;\n              }\n\n              /* add your own CSS to make it look how you want */\n            </style>\n          </head>\n          <body>\n            <main>${text}</main>\n          </body>\n        </html>\n      `)\n    })\n})\n```\n\nThis website looks the exact same, but is generated on the server-side instead of in the browser. Here's the full code for the Node.js solution: [Live demo](https://notion-to-website-node.glitch.me) and [source code](https://glitch.com/edit/#!/notion-to-website-node)."
}